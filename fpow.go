package main

import "fmt"

func fpow(a, n int64) int64 {
	var res, mult int64 = 1, a
	for n != 0 {
		if n&1 == 1 {
			res *= mult
		}
		mult *= mult
		n >>= 1
	}
	return res
}

// ---------------------[3**7]---------------------
// 3 - 011
// 7 - 111

// 3 ** 7 = 011 ** 111 = 3 ** ((1 * 2**0) + (1 * 2**1) + (1 * 2**2)) = ((3 ** (1 * 2**2)) * (3 ** (1 * 2**1)) * (3 ** (1 * 2**0))) = 3**4 * 3**2 * 3**1

// (3 ** 7) = (3 * 3 * 3 * 3 * 3 * 3 * 3)

// res = 3, mu = 9
// res = 27, mu = 81
// res = 2187, mu = 6561
// n = 0 => answer = 2187

// ---------------------[3**4]---------------------
// 3 - 011
// 4 - 100

// 3 ** 4 = 011 ** 100 = 3 ** ((1 * 2**0) + (0 * 2**1) + (0 * 2**2)) = ((3 ** (1 * 2**2)) * (3 ** (0 * 2**1)) * (3 ** (0 * 2**0))) = 3**4 * 3**0 * 3**0

// (3 ** 4) = (3 * 3 * 3 * 3)

// res = 1, mu = 9
// res = 1, mu = 81
// res = 81, mu = 6561

func main() {
	var a int64 = 3
	// var n int64 = 4
	var n int64 = 7
	result := fpow(a, n)
	fmt.Println(result)
}
